
# 要件定義書
##　用語定義
リポジトリ  同期を行う対象のフォルダ全体
フォルダ    リポジトリ内のディレクトリを構成するフォルダ
ファイル    同期を行う対象のファイル
ログファイル 操作の履歴情報を記録するファイル。同期を行う対象外のファイル。
トラッシュフォルダ　同期処理によりファイルを削除する場合に一時的にファイルを保存しておくフォルダ。同期の対象外。
構成情報ファイル　リポジトリのフォルダ構成情報及びファイルの情報（名前、パス、ハッシュ値、最終確認日時）を保持する。

## 機能要件
### 001   　２つのフォルダを同期する
#### 001-001 ファイルの追加     
    片方のリポジトリにファイルが追加された場合、もう片方のリポジトリにの同じパスにファイルをコピーする。
#### 001-002 フォルダの追加
     片方のリポジトリにフォルダが追加された場合、もう片方のリポジトリの同じパスにフォルダを作成する。
#### 001-003 ファイルの削除
    片方のリポジトリからファイルが削除された場合、もう片方のリポジトリの同じファイルをトラッシュフォルダに移動し、リポジトリ内のフォルダは削除する。
#### 001-003 フォルダの削除
    片方のリポジトリからフォルダが削除された場合、もう片方のリポジトリから同じフォルダを削除する。削除対象のフォルダ下にファイルもしくはフォルダが残っていない状態でフォルダの削除同期を実施すること。
#### 001-004 ファイルの変更
    ファイルの変更を検知し同期する。同期時に変更前のファイルをトラッシュフォルダにコピーする。

### 002   　コンフリクト処理
#### 002-001 コンフリクトの判定
    以下の場合コンフリクトの発生と判定しコンフリクト処理を実行する。
    ・前回の同期処理以後に２つのリポジトリの同じファイルに別々の変更が加えられた場合。
    ・前回の同期処理以後に片方のリポジトリから削除、もう片方のリポジトリで変更が加えられた場合。
#### 002-002 コンフリクト通知
    コンフリクトが判定された場合、ユーザにコンフリクトの発生を通知し、どちらのリポジトリのファイルを正とするかを確認する。
#### 002-003 コンフリクト処理
    ユーザーからコンフリクトの確認をとれた場合、誤のファイルをトラッシュフォルダに移動し、正のファイルをコピーする。

### 003 トラッシュフォルダの自動削除
#### 003-001 自動削除のタイミング
    基本的にはユーザーが不要なファイルの削除を行う。トラッシュフォルダが容量上限を超える場合、自動でファイルを削除する。    
#### 003-002 自動削除処理
    容量上限を超えるファイルの追加を要請された場合、要請されたファイルを追加しても容量上限を超えない容量までファイルを削除する。ファイルの削除順はFIFOとする。
#### 003-003 トラッシュフォルダの容量警告
    トラッシュフォルダ容量の80%を超えた時、警告をユーザーに通知する。
### 004 ログの保存
#### 004-001 ファイル操作ログ
    ファイル操作した際に以下の情報をログに保存する
    ・行った操作：追加、削除、更新
    ・対処のファイル名・パス
    ・操作を実行した日時
#### 004-002 ログファイルの管理
    ログファイルの上限サイズを超える場合、既存のログファイルを圧縮して保存し、新たなログファイルを作成し新たなログファイルにログを追記する。
## 非機能要件
### 011 サイズ
#### 011-001 リポジトリサイズ
    リポジトリの全サイズの上限を1TBとする。
#### 011-002 トラッシュフォルダのサイズ
    トラッシュフォルダのサイズ上限を200GBとする。160GB(80%)を警告閾値とする。
#### 011-003 構成情報のファイルサイズ
    構成情報のファイルサイズの上限を10GBとする。
#### 011-004 ログファイルのサイズ
    ログファイルの上限サイズを1GBとする。

### 012 トラフィック量
    トラフィック上限を1Mbpsとする。

### 013 処理頻度
#### 013-001 同期処理の処理頻度
    １回/日のペースで全リポジトリの同期を実施する。
#### 013-002 コンフリクトの通知頻度
    コンフリクトの発生時に発生の通知を実施し、その後処理されない場合は１回/日の頻度でコンフリクトの発生をユーザーに通知する。
#### 013-004 トラッシュフォルダの警告通知頻度
    トラッシュフォルダ容量の閾値を超えた際に通知を実施し、その後解消されていない場合は１回/日の頻度でトラッシュフォルダ容量の警告をユーザーに通知する。
